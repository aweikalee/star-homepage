var t=Object.assign;import{c as e,a,F as n,d as o,r as l,o as i,b as s,g as r,i as c,e as u,f as d,C as p,V as h,h as v,w as m,j as f,T as g,m as w,k as _,n as y,l as b,S as C,P as x,M,G as k,p as A,R as E,q as T,s as S,t as B,u as I,v as q,x as F,y as P,z as j}from"./vendor.02ee4a77.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const n=new URL(t,location),o=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,l)=>{const i=new URL(t,n);if(self[e].moduleMap[i])return a(self[e].moduleMap[i]);const s=new Blob([`import * as m from '${i}';`,`${e}.moduleMap['${i}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){l(new Error(`Failed to import: ${t}`)),o(r)},onload(){a(self[e].moduleMap[i]),o(r)}});document.head.appendChild(r)})),self[e].moduleMap={}}}("/assets/");const D="https://beian.miit.gov.cn",L="浙ICP备17005099号-2",Y=[{title:"毛呆账簿",url:"https://ledger.maodai.site",description:"自用记账工具，目前只做了基础功能，扩展的功能以后需要用的时候再慢慢加。",points:[-46,75,-46,-75,44,-75,46,74,-14,84,-68,27,22,93,-86,-15,15,61,-52,-7,-23,74,-23,48,-23,22,-23,-51,7,-22,33,-22,20,-36,20,-66,5,-36,35,-36,5,-51,35,-51],lines:[3,0,0,1,1,2,2,3,4,5,6,7,8,9,10,11,11,12,12,13,14,16,15,16,16,17,18,19,20,21]},{title:"旅游手账",url:"https://awwwk.com",description:"行程制作及展示。针对制作行程单以及旅游过程中的诸多痛点进行了改善。",points:[-46,75,-46,-75,44,-75,46,74,-14,84,-68,27,22,93,-86,-15,15,61,-52,-7,-23,74,-23,48,-23,22,-23,-51,20,-23,5,-61,20,-50,35,-61],lines:[3,0,0,1,1,2,2,3,4,5,6,7,8,9,10,11,11,12,12,13,14,15,15,16,16,17,17,14]},{title:"毛呆's Blog",url:"https://blog.maodai.site",description:"技术博客，没啥文章。大多死于草稿箱（然后丢进了另一个加密的博客中给自己看）",points:[-44,-58,-57,-25,-42,9,-55,46,-13,26,8,28,37,53,42,14,52,-23,34,-59,0,10,0,-40,-18,-39,17,-39],lines:[0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,10,11,11,12,11,13]},{title:"JavaScript 抽象相等比较",url:"https://aweikalee.github.io/abstract-equality-comparison/",description:"展示 JavaScript 抽象相等的比较过程，帮助新人更好理解隐式转换。",points:[-25,80,-28,-14,-68,-15,-84,18,74,69,44,87,19,57,74,15,55,-19,16,-1,-80,-45,-22,-45,-80,-75,-22,-75,80,-45,22,-45,80,-75,22,-75],lines:[0,1,1,2,2,3,4,5,5,6,6,7,7,8,8,9,10,11,12,13,14,15,16,17]},{title:"Github",url:"https://github.com/aweikalee",description:"aweikalee",points:[-52,59,-26,49,25,47,53,61,55,34,62,-13,18,-44,26,-94,84,-55,89,46,36,92,-58,82,-94,35,-91,-58,-29,-94,-26,-73,-55,-67,-74,-43,-48,-55,-25,-58,-17,-45,-61,-9,-53,34],lines:[]}],R=[[-15,83,-15,53,15,53,15,83,-1,52,2,20,-8,0,-43,-8,-23,18,-16,50,16,45,-9,20,0,62,-37,-93,-32,-39,-17,3,4,-4,22,-43,45,-93],[-15,83,-15,53,15,53,15,83,0,50,-7,29,-6,2,12,93,-29,74,-18,46,15,44,28,74,-13,91,-20,-86,-41,-36,-19,-1,8,6,17,-37,14,-93],[-15,83,-15,53,15,53,15,83,-1,51,-3,18,0,-1,-32,52,-29,20,-17,49,14,42,10,16,20,-15,-36,-96,-19,-50,-13,-5,10,-2,26,-47,36,-95],[-15,83,-15,53,15,53,15,83,-1,51,-9,21,-2,3,-16,89,-53,60,-16,46,16,44,52,37,3,32,-14,-93,-22,-39,-15,0,10,5,19,-38,31,-93],[-15,83,-15,53,15,53,15,83,-1,51,1,28,-8,1,-13,34,-42,33,-16,47,15,47,21,20,8,-11,-49,-92,-37,-41,-23,-1,4,4,35,-37,26,-92],[-15,83,-15,53,15,53,15,83,-1,51,-1,26,-7,2,16,10,-16,16,-17,47,17,43,6,13,6,54,18,-83,-25,-38,-18,2,11,0,9,-41,3,-91]];Y.push({title:"关于我",url:"",description:e(n,null,[e("div",null,[a("我是毛呆, 一个接触前端很久但只有一年工作经验的前端工程师。")]),e("div",null,[a("目前正在"),e("strong",null,[a("求职中")]),a("，对我感兴趣的话可以联系我，"),e("a",{href:"mailto:aweikalee@163.com"},[a("aweikalee@163.com")]),a("。")])]),points:R[Math.floor(Math.random()*R.length)],lines:[0,1,1,2,2,3,0,3,4,5,5,6,7,8,8,9,9,10,10,11,11,12,13,14,14,15,15,16,16,17,17,18]}),Y.map((t=>{const{lines:e,points:a}=t;if(0===e.length){const t=Math.floor(a.length/2);for(let a=0;a<t;a+=1)e.push(0===a?t-1:a-1),e.push(a)}}));var z="688";var O="450",X="800";const U={screenBoundary:{w:Number("1088"),h:Number(z)},phone:{w:Number(O),h:Number(X)},fov:{base:30/360*2*Math.PI,mobile:{portrait:50/360*2*Math.PI,landscape:30/360*2*Math.PI}},constellation:{scale:.008,near:5,far:6},album:{imageQuality:2073600,thumbnailQuality:200}};var V="_footer_13vno_1",K=o({name:"TheFooter",setup:()=>()=>e("div",{class:V},[e("div",null,[a("DESIGN BY "),e("a",{href:"https://github.com/aweikalee"},[a("@AWEIKALEE (毛呆)")])]),e("div",null,[e("a",{href:D},[L])])])});var Q="_phone_1jjyg_12",N="_view_1jjyg_21",J="_footer_1jjyg_28",H="_border-top_1jjyg_42",W="_border-bottom_1jjyg_42",G="_border-left_1jjyg_42",Z="_border-right_1jjyg_42",$=o({name:"ThePhone",setup:(t,{slots:a})=>()=>{var t;return e("div",{class:Q},[e("div",{class:N},[null==(t=a.default)?void 0:t.call(a)]),e(K,{class:J},null),e("div",{class:H},null),e("div",{class:W},null),e("div",{class:G},null),e("div",{class:Z},null)])}});function tt(t,e,a){const n=a/e,o=Math.tan(t/2);return 2*Math.atan(n*o)}function et(t){const e=document.createElement("canvas"),a=e.getContext("2d");return e.width=t.width,e.height=t.height,a.putImageData(t,0,0),e}function at(t,e,a){return new Promise((n=>{t.toBlob(n,e,a)}))}class nt{constructor(){this.list=[]}on(t){~this.list.indexOf(t)||this.list.push(t)}off(t){const e=this.list.indexOf(t);~e&&this.list.splice(e,1)}emit(){this.list.forEach((t=>t()))}}let ot;const lt=u({root:document.getElementById("app"),w:1,h:1,orientation:"portrait",isMobileInCSS:!1}),it=d(lt),{w:st,h:rt}=U.screenBoundary,ct=()=>{const t=window.innerWidth,e=window.innerHeight;lt.root.style.width=`${t}px`,lt.root.style.height=`${e}px`,window.scrollTo({top:0}),lt.w=t>>1<<1,lt.h=e>>1<<1,lt.orientation=e>=t?"portrait":"landscape",lt.isMobileInCSS=t<st||e<rt};function ut(t,e){return Math.random()*(e-t)+t}function dt(t=3){let e=0;for(let a=0;a<t;a+=1)e+=Math.random();return e/t}function pt(t){const[e,a,n]=t,o=Math.max(...t),l=o-Math.min(...t),i=Math.PI/3;let s;return s=0===l?0:o===e?i*((a-n)/l%6):o===a?i*((n-e)/l+2):i*((e-a)/l+4),[s,0===o?0:l/o,o]}function ht(t,e){const a=new p(t),n=new p(e),o=pt(a),l=pt(n);return o[0]>l[0]&&(l[0]+=2*Math.PI),t=>function(t){const e=Math.PI/3,[a,n,o]=t,l=o*n,i=l*(1-Math.abs(a/e%2-1)),s=o-l,[r,c,u]=[[l,i,0],[i,l,0],[0,l,i],[0,i,l],[i,0,l],[l,0,i]][Math.floor(a/e%6)];return[r+s,c+s,u+s]}(o.map(((e,a)=>e*t+l[a]*(1-t))))}ct(),function(t){if(!ot){ot=new nt;try{!function(t,e){let a,{width:n,height:o}=r(t);a=new c((t=>{const a=t[0].contentRect;Math.round(n)===Math.round(a.width)&&Math.round(o)===Math.round(a.height)||e(),n=a.width,o=a.height})),a.observe(t)}(function(){const t=document.createElement("div");return t.style.cssText="\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: -99999999\n  ",document.body.appendChild(t),t}(),(()=>ot.emit()))}catch(e){addEventListener("resize",(()=>ot.emit()))}}ot.on(t)}(((t,e=100)=>{let a;return(...n)=>{void 0===a&&(a=setTimeout((()=>{t(...n),a=void 0}),e))}})(ct));let vt=!1;const mt={onDragstart:function(t){vt=!0,t.preventDefault()},onClick:function(t){vt&&t.preventDefault(),vt=!1},onTouchStart:function(t){t.stopPropagation()}},ft=[0,3e3,1e4];var gt,wt;(wt=gt||(gt={}))[wt.NO_STATUS=0]="NO_STATUS",wt[wt.TAKING=1]="TAKING",wt[wt.TAKED=2]="TAKED";const _t=u({visible:{album:!1,balance:!1,constellation:!0,list:!1,timer:!1},setVisible(t,e){_t.visible[t]=e},toggleVisible(t){_t.setVisible(t,!_t.visible[t])},balance:new h(1,1,1),setBalance(t){_t.balance=t},delay:ft[0],setDelay(t){_t.delay=t},toggleDelay(){const t=ft.indexOf(_t.delay)+1;_t.setDelay(ft[t%ft.length])},desaturate:!1,setDesaturate(t){_t.desaturate=t},frontCamera:!1,setFrontCamera(t){_t.frontCamera=t},toggleFrontCamera(){_t.setFrontCamera(!_t.frontCamera)},state:0,setState(t){_t.state=t}}),yt=d(_t),bt=u({fov:v((()=>{const{fov:t,phone:e}=U,{h:a,isMobileInCSS:n,orientation:o}=it;return n?t.mobile[o]:tt(t.base,e.w,a)})),w:v((()=>it.w)),h:v((()=>it.h))}),Ct=u({fov:1,w:1,h:1,offsetX:0,offsetY:0}),xt=l(null);m((()=>t({el:xt.value},bt)),(({el:t,fov:e,w:a,h:n})=>{if(!t)return;const o=t.getBoundingClientRect();Ct.w=Math.floor(o.width),Ct.h=Math.floor(o.height),Ct.offsetX=Math.floor(o.x+o.width/2-a/2),Ct.offsetY=Math.floor(o.y+o.height/2-n/2),Ct.fov=tt(e,n,Ct.h)}));const Mt=v((()=>{const t=U.album.imageQuality,e=Ct.w/Ct.h,a=Math.sqrt(t*e)>>1<<1,n=a/e>>1<<1,o=a/Ct.w,l=Math.floor(Ct.offsetX*o),i=Math.floor(Ct.offsetY*o),s=a+2*Math.abs(l),r=n+2*Math.abs(i);return{outputW:a,outputH:n,offsetX:l,offsetY:i,w:s,h:r,fov:tt(Ct.fov,n,r)}})),kt=d(u({full:bt,camera:Ct,photo:Mt,setCameraElement:function(t){xt.value=t}})),At=-1,Et=0,Tt=1,St=2,Bt=3,It=new h,qt=new f,Ft=new f;const Pt=v((()=>{const{h:t,fov:e}=kt.full,a=t/(2*Math.tan(e/2));return(t,e,n)=>({x:t/n*a,y:-e/n*a})})),jt=u({toPx:Pt,camera:new g}),Dt=d(jt),Lt=new g;Lt.position.set(0,0,1);const Yt=new function(t,{element:e=document.body,enabled:a=!0,target:n=new h,ease:o=.25,inertia:l=.85,enableRotate:i=!0,rotateSpeed:s=.1,autoRotate:r=!1,autoRotateSpeed:c=1,enableZoom:u=!0,zoomSpeed:d=1,enablePan:p=!0,panSpeed:v=.1,minPolarAngle:m=0,maxPolarAngle:g=Math.PI,minAzimuthAngle:w=-1/0,maxAzimuthAngle:_=1/0,minDistance:y=0,maxDistance:b=1/0}={}){this.enabled=a,this.target=n,o=o||1,l=l||0,this.minDistance=y,this.maxDistance=b;const C={radius:1,phi:0,theta:0},x={radius:1,phi:0,theta:0},M={radius:1,phi:0,theta:0},k=new h,A=new h;A.copy(t.position).sub(this.target),M.radius=x.radius=A.distance(),M.theta=x.theta=Math.atan2(A.x,A.z),M.phi=x.phi=Math.acos(Math.min(Math.max(A.y/x.radius,-1),1)),this.offset=A,this.update=()=>{r&&B===At&&function(){const t=2*Math.PI/60/60*c;C.theta-=t}(),x.radius*=C.radius,x.theta+=C.theta,x.phi+=C.phi,x.theta=Math.max(w,Math.min(_,x.theta)),x.phi=Math.max(m,Math.min(g,x.phi)),x.radius=Math.max(this.minDistance,Math.min(this.maxDistance,x.radius)),M.phi+=(x.phi-M.phi)*o,M.theta+=(x.theta-M.theta)*o,M.radius+=(x.radius-M.radius)*o,this.target.add(k);let e=M.radius*Math.sin(Math.max(1e-6,M.phi));A.x=e*Math.sin(M.theta),A.y=M.radius*Math.cos(M.phi),A.z=e*Math.cos(M.theta),t.position.copy(this.target).add(A),t.lookAt(this.target),C.theta*=l,C.phi*=l,k.multiply(l),C.radius=1},this.forcePosition=()=>{A.copy(t.position).sub(this.target),M.radius=x.radius=A.distance(),M.theta=x.theta=Math.atan2(A.x,A.z),M.phi=x.phi=Math.acos(Math.min(Math.max(A.y/x.radius,-1),1)),t.lookAt(this.target)};const E=new f,T=new f,S=new f;let B=At;function I(){return Math.pow(.95,d)}this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};const q=(a,n)=>{It.copy(t.position).sub(this.target);let o=It.distance();var l,i;o*=Math.tan((t.fov||45)/2*Math.PI/180),l=2*a*o/e.clientHeight,i=t.matrix,It.set(i[0],i[1],i[2]),It.multiply(-l),k.add(It),function(t,e){It.set(e[4],e[5],e[6]),It.multiply(t),k.add(It)}(2*n*o/e.clientHeight,t.matrix)};function F(t){C.radius/=t}function P(t,a){qt.set(t,a),Ft.sub(qt,E).multiply(s),C.theta-=2*Math.PI*Ft.x/e.clientHeight,C.phi-=2*Math.PI*Ft.y/e.clientHeight,E.copy(qt)}function j(t,e){qt.set(t,e),Ft.sub(qt,T).multiply(v),q(Ft.x,Ft.y),T.copy(qt)}const D=t=>{if(this.enabled){switch(t.button){case this.mouseButtons.ORBIT:if(!1===i)return;E.set(t.clientX,t.clientY),B=Et;break;case this.mouseButtons.ZOOM:if(!1===u)return;S.set(t.clientX,t.clientY),B=Tt;break;case this.mouseButtons.PAN:if(!1===p)return;T.set(t.clientX,t.clientY),B=St}B!==At&&(window.addEventListener("mousemove",L,!1),window.addEventListener("mouseup",Y,!1))}},L=t=>{if(this.enabled)switch(B){case Et:if(!1===i)return;P(t.clientX,t.clientY);break;case Tt:if(!1===u)return;!function(t){qt.set(t.clientX,t.clientY),Ft.sub(qt,S),Ft.y>0?F(I()):Ft.y<0&&F(1/I()),S.copy(qt)}(t);break;case St:if(!1===p)return;j(t.clientX,t.clientY)}},Y=t=>{window.removeEventListener("mousemove",L,!1),window.removeEventListener("mouseup",Y,!1),B=At},R=t=>{this.enabled&&u&&(B===At||B===Et)&&(t.stopPropagation(),t.preventDefault(),t.deltaY<0?F(1/I()):t.deltaY>0&&F(I()))},z=t=>{if(this.enabled)switch(t.preventDefault(),t.touches.length){case 1:if(!1===i)return;E.set(t.touches[0].pageX,t.touches[0].pageY),B=Et;break;case 2:if(!1===u&&!1===p)return;!function(t){if(u){let e=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+a*a);S.set(0,n)}if(p){let e=.5*(t.touches[0].pageX+t.touches[1].pageX),a=.5*(t.touches[0].pageY+t.touches[1].pageY);T.set(e,a)}}(t),B=Bt;break;default:B=At}},O=t=>{if(this.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===i)return;B===At&&(B=Et,E.set(t.touches[0].pageX,t.touches[0].pageY)),P(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!1===u&&!1===p)return;!function(t){if(u){let e=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+a*a);qt.set(0,n),Ft.set(0,Math.pow(qt.y/S.y,d)),F(Ft.y),S.copy(qt)}p&&j(.5*(t.touches[0].pageX+t.touches[1].pageX),.5*(t.touches[0].pageY+t.touches[1].pageY))}(t);break;default:B=At}},X=()=>{this.enabled&&(B=At)},U=t=>{this.enabled&&t.preventDefault()};this.remove=function(){e.removeEventListener("contextmenu",U),e.removeEventListener("mousedown",D),e.removeEventListener("wheel",R),e.removeEventListener("touchstart",z),e.removeEventListener("touchend",X),e.removeEventListener("touchmove",O),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",Y)},e.addEventListener("contextmenu",U,!1),e.addEventListener("mousedown",D,!1),e.addEventListener("wheel",R,{passive:!1}),e.addEventListener("touchstart",z,{passive:!1}),e.addEventListener("touchend",X,!1),e.addEventListener("touchmove",O,{passive:!1})}(Lt,{element:document.getElementById("app"),ease:.5,enableZoom:!1,enablePan:!1,rotateSpeed:-.03,autoRotate:!0,autoRotateSpeed:.06,minPolarAngle:Math.PI/2-U.fov.base/2,maxPolarAngle:Math.PI/2+U.fov.base/2});!function t(){requestAnimationFrame(t),Yt.update(),jt.camera.lookAt(Lt.position),yt.frontCamera&&(jt.camera.rotation.y+=Math.PI,jt.camera.rotation.x*=-1)}();const Rt=U.fov.base,zt=2*Math.PI/Y.length,Ot=Y.map(((e,a)=>{const n=function(t){const e=Math.floor(t.length/2),a=new Float32Array(3*e),{constellation:{scale:n,near:o,far:l}}=U;for(let i=0;i<e;i+=1){const e=2*i,s=[t[e],t[e+1],-ut(o,l)/n].map((t=>t*n));a.set(s,3*i)}return a}(e.points),o=function(t,e){const a=2*Math.floor(t.length/2),n=new Float32Array(3*a);for(let o=0;o<a;o+=1){const a=3*t[o],l=[e[a],e[a+1],e[a+2]];n.set(l,3*o)}return n}(e.lines,n);return t(t({},e),{points:n,lines:o,rotationY:zt*a,rotationX:Rt*ut(-.5,.5)})})),Xt=v((()=>{const{w:t,h:e,fov:a}=kt.camera;return{x:a,y:tt(a,e,t)}})),Ut=v((()=>{const{x:t,y:e}=Dt.camera.rotation,a=function(t,e){const a=t%e;return a<0?a+e:a}(e+zt/2,2*Math.PI),n=Math.floor(a/zt),o=Ot[n],l=Xt.value;return Math.abs(o.rotationY+zt/2-a)>l.y/2||Math.abs(o.rotationX-t)>l.x/2?null:o})),Vt=d(u({data:Ot,focus:Ut}));const Kt=u({photos:[],async pushPhoto(e){const a=await function(t){const e=new Promise((e=>{const a=new Image;a.width=t.w,a.height=t.h,a.onload=()=>e(a),a.src=t.src}));return new Promise((async t=>{const a=function(t,e){const a=document.createElement("canvas"),n=a.getContext("2d");let o=t.width,l=t.height;return e/o*l>=e?(l=Math.round(e/o*l),o=e):(o=Math.round(e/l*o),l=e),a.width=o,a.height=l,n.drawImage(t,0,0,o,l),a}(await e,U.album.thumbnailQuality),n=await at(a);t(URL.createObjectURL(n))}))}(e);Kt.photos.push(t(t({},e),{msrc:a}))},buttonElement:null,setButtonElement(t){Kt.buttonElement=t}}),Qt=d(Kt);var Nt={balance:e("svg",w({viewBox:"0 0 600 600",fill:"currentColor"},{xmlns:"http://www.w3.org/2000/svg"}),[e("circle",{cx:"211",cy:"385",r:"170",opacity:"0.3"},null),e("circle",{cx:"300",cy:"215",r:"170",opacity:"0.6"},null),e("circle",{cx:"389",cy:"385",r:"170",opacity:"0.9"},null)]),camera:e("svg",w({viewBox:"0 0 600 600"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"}),[e("polygon",{points:"30 130 160 130 220 60 380 60 440 130 570 130 570 530 30 530",stroke:"currentColor","stroke-width":"40","stroke-linejoin":"round",opacity:"0.5"},null),e("line",{x1:"50",y1:"70",x2:"120",y2:"70",stroke:"currentColor","stroke-width":"40",opacity:"0.5"},null),e("path",{d:"M 210 250 a 110 110 0 0 1 200 60 t -50 0",stroke:"currentColor","stroke-width":"40","stroke-linecap":"round"},null),e("path",{d:"M 390 380 a 110 110 0 0 1 -200 -60 t 50 0",stroke:"currentColor","stroke-width":"40","stroke-linecap":"round"},null)]),close:e("svg",w({viewBox:"0 0 600 600",fill:"currentColor"},{xmlns:"http://www.w3.org/2000/svg"}),[e("line",{x1:"120",y1:"120",x2:"480",y2:"480",stroke:"currentColor","stroke-width":"80","stroke-linecap":"round"},null),e("line",{x1:"480",y1:"120",x2:"120",y2:"480",stroke:"currentColor","stroke-width":"80","stroke-linecap":"round"},null)]),constellation:e("svg",w({viewBox:"0 0 600 600"},{xmlns:"http://www.w3.org/2000/svg"}),[e("polygon",{points:"228 -74 114 37 141 194 0 120 -141 194 -114 37 -228 -74 -71 -97 0 -240 71 -97",stroke:"currentColor","stroke-width":"40",transform:"translate(300, 300)"},null)]),list:e("svg",w({id:"c881b985-35f8-419f-837d-9f19c1339a61","data-name":"图鉴",viewBox:"0 0 600 600"},{xmlns:"http://www.w3.org/2000/svg"}),[e("defs",null,[e("clipPath",{id:"823cb2cd-fb39-45ac-852d-f490dffa35d5"},[e("rect",{x:"460",y:"0",width:"100",height:"600"},null),e("rect",{x:"0",y:"532",width:"600",height:"100"},null)])]),e("rect",{x:"100",y:"32",rx:"40",ry:"40",width:"320",height:"460",stroke:"currentColor","stroke-width":"40"},null),e("rect",{x:"170",y:"102",rx:"40",ry:"40",width:"320",height:"460",stroke:"currentColor","stroke-width":"40","clip-path":"url(#823cb2cd-fb39-45ac-852d-f490dffa35d5)"},null),e("polygon",{points:"114 -37 57 19 71 97 0 60 -71 97 -57 19 -114 -37 -35 -49 0 -120 35 -49",stroke:"currentColor","stroke-width":"20",transform:"translate(260, 262)"},null)]),timer:e("svg",w({viewBox:"0 0 600 600"},{xmlns:"http://www.w3.org/2000/svg"}),[e("path",{d:"M 140 135 A 229 229 0 0 0 70 300 c 0 127 103 230 230 230 S 530 427 530 300 427 70 300 70 v 65",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"20","stroke-width":"40"},null),e("path",{d:"M322 278 a 31 31 0 0 1 -44 44 C 266 310 192 192 192 192 S 310 266 322 278 Z",fill:"currentColor"},null)])};var Jt="_icon_zi5ua_1",Ht=o({name:"Icon",props:{value:{type:String,required:!0}},setup:t=>()=>e("span",{class:Jt},[t.value&&Nt[t.value]])});var Wt="_camera_1ajcg_7",Gt="_toolbar_1ajcg_16",Zt="_item_1ajcg_28",$t="_button_1ajcg_34",te="_description_1ajcg_49",ee="_view_1ajcg_53",ae="_shutterbar_1ajcg_58",ne="_album_1ajcg_69",oe="_album__button_1ajcg_76",le="_shutter_1ajcg_58",ie="_shutter__button_1ajcg_91",se="_switch_1ajcg_119",re="_switch__button_1ajcg_126",ce="_scale-in--active_1ajcg_160",ue="_scale-in--from_1ajcg_164",de="_scale-in--to_1ajcg_168",pe="_mask_1ajcg_172",he="_fade-in--active_1ajcg_182",ve="_fade-in--from_1ajcg_186",me="_fade-in--to_1ajcg_190",fe="_timer_1ajcg_195";const ge=o({name:"TheCameraToolBarItem",props:{active:{type:Boolean,default:!1},title:{type:String},onClick:{type:Function}},setup:(t,{slots:a})=>()=>{var n;return e("div",{class:Zt},[e("div",w({title:t.title,class:$t,"data-active":t.active},mt,{onClick:e=>{var a;mt.onClick(e),null==(a=t.onClick)||a.call(t,e)}}),[null==(n=a.default)?void 0:n.call(a)])])}});var we=o({name:"TheCameraToolBar",setup:()=>()=>e("div",{class:Gt},[e(ge,{title:"显示星座",active:yt.visible.constellation,onClick:()=>{yt.toggleVisible("constellation")}},{default:()=>e(Ht,{value:"constellation"},null)}),e(ge,{title:"延时",active:!!yt.delay,onClick:()=>{yt.toggleDelay()}},{default:()=>e(n,null,[e(Ht,{value:"timer"},null),yt.delay?e("span",{class:te},[yt.delay/1e3,a("秒")]):null])}),e(ge,{title:"色彩平衡",onClick:()=>{yt.toggleVisible("balance")}},{default:()=>e(Ht,{value:"balance"},null)}),e(ge,{title:"星座图鉴",onClick:()=>{yt.toggleVisible("list")}},{default:()=>e(Ht,{value:"list"},null)})])}),_e=o({name:"TheCameraTimer",props:{onTimeUp:Function},setup(t){const a=yt.delay,n=Date.now(),o=u({delay:a,startTime:n,endTime:n+a});let l;const r=()=>{var e;const a=Date.now(),n=o.endTime-o.delay+1e3;a>=o.endTime?null==(e=t.onTimeUp)||e.call(t):l=setTimeout((()=>{o.delay-=1e3,r()}),n-a)};i(r),s((()=>clearTimeout(l)));const c=v((()=>Math.floor(o.delay/1e3)));return()=>e("div",{class:fe,key:c.value},[c.value])}}),ye=o({name:"TheCamera",setup(t,{slots:a}){const n=u({albumButtonVisible:!0,shutterMask:!1}),o=v((()=>{var t;const e=Qt.photos[Qt.photos.length-1];return null!=(t=null==e?void 0:e.msrc)?t:null==e?void 0:e.src}));m(o,(()=>{n.albumButtonVisible=!1,y((()=>n.albumButtonVisible=!0))}));const i=()=>{yt.setVisible("timer",!1),yt.setState(gt.TAKING)},r=l();m(r,(t=>Qt.setButtonElement(null!=t?t:null))),s((()=>Qt.setButtonElement(null)));const c=l();return m(c,(t=>kt.setCameraElement(null!=t?t:null))),s((()=>kt.setCameraElement(null))),()=>{var t;return e("div",{class:Wt},[e(we,null,null),e("div",{class:ee,ref:c},[null==(t=a.default)?void 0:t.call(a),yt.visible.timer&&e(_e,{onTimeUp:i},null)]),e("div",{class:ae},[e("div",{class:ne},[e(_,{enterActiveClass:ce,enterFromClass:ue,enterToClass:de},{default:()=>n.albumButtonVisible&&e("div",w({title:"相册",class:oe,style:{backgroundImage:o.value?`url(${o.value})`:void 0}},mt,{onClick:t=>{mt.onClick(t),yt.setVisible("album",!0)},ref:r}),null)})]),e("div",{class:le},[e("div",w({title:"快门",class:ie,"data-active":yt.visible.timer},mt,{onClick:t=>{mt.onClick(t),yt.toggleVisible("timer")}}),null)]),e("div",{class:se},[e("div",w({title:"切换摄像头",class:re},mt,{onClick:t=>{mt.onClick(t),yt.toggleFrontCamera()}}),[e(Ht,{value:"camera"},null)])])]),e(_,{leaveActiveClass:he,leaveFromClass:ve,leaveToClass:me},{default:()=>yt.state===gt.TAKING&&e("div",{class:pe},null)})])}}});class be{constructor(t={}){const{canvas:e=document.createElement("canvas"),width:a=100,height:n=100}=t;this.canvas=e;const o=this.ctx=e.getContext("2d");e.width=a,e.height=n,o.translate(a/2,n/2)}save(){return this.ctx.save(),this}restore(){return this.ctx.restore(),this}setStyles(t){const{x:e,y:a,rotate:n,scaleX:o,scaleY:l,opacity:i,fill:s,stroke:r,strokeWidth:c}=t,{ctx:u}=this;return void 0===e&&void 0===a||u.translate(null!=e?e:0,null!=a?a:0),n&&u.rotate(n),void 0===o&&void 0===l||u.scale(null!=o?o:1,null!=l?l:1),void 0!==i&&(u.globalAlpha=i),void 0!==s&&(u.fillStyle=s),void 0!==r&&(u.strokeStyle=r),void 0!==c&&(u.lineWidth=c),this}wrapper(t,e){return e&&(this.save(),this.setStyles(e)),t(),e&&this.restore(),this}drawImage(t,e){return this.wrapper((()=>{const{ctx:e}=this;e.drawImage(t,-t.width/2,-t.height/2)}),e)}rect({w:t,h:e},a){return this.wrapper((()=>{const{ctx:a}=this;a.beginPath(),a.rect(-t/2,-e/2,t,e),a.closePath(),a.fill()}),a)}circle({radius:t},e){return this.wrapper((()=>{const{ctx:e}=this;e.beginPath(),e.arc(0,0,t,0,2*Math.PI),e.closePath(),e.fill()}),e)}}let Ce;function xe(t){return Ce||(Ce=new b(t),async function(){const t=2048,e=2*t,a=new be({width:e,height:t});return a.rect({w:e,h:t},{fill:"#000"}),a.wrapper((()=>{[10573005,26276].forEach((n=>{Ee(a,{image:ke(new p(n)),width:e,height:t,quantity:20,x:()=>Math.random(),y:()=>Math.random(),scale:()=>100*ut(.5,1),fy:()=>1})}))}),{opacity:.1}),a.wrapper((()=>{Ee(a,{image:ke(new p(2603122)),width:e,height:614.4,quantity:20,x:()=>dt(2),y:()=>Math.random(),scale:()=>50*ut(.5,1)})}),{opacity:.15}),a.wrapper((()=>{Ee(a,{image:ke(new p(16248018)),width:.9*e,height:100,quantity:200,x:()=>dt(2),y:()=>Math.random(),scale:()=>15*ut(.2,1)})}),{opacity:.3}),a.wrapper((()=>{Ee(a,{image:ke(new p(16248018)),width:.3*e,height:200,quantity:100,x:()=>dt(2),y:()=>Math.random(),scale:()=>15*ut(.2,1)})}),{opacity:.3}),a.wrapper((()=>{Ee(a,{image:ke(new p(16777215)),width:.9*e,height:70,quantity:300,x:()=>dt(3),y:()=>Math.random()-.5,scale:()=>6*ut(.1,1)})}),{opacity:.2}),a.wrapper((()=>{Ee(a,{image:ke(new p(16777215)),width:.3*e,height:200,quantity:100,x:()=>dt(3),y:()=>Math.random()-.5,scale:()=>10*ut(.1,1)})}),{opacity:.15}),a.wrapper((()=>{const t=[[new p(1839365),1,.3],[new p(1839365),1,1.36],[new p(1839365),.4,1.1],[new p(1839365),2.9,1.1]];t.forEach((t=>{Ee(a,{image:Ae(...t),width:e,height:50,quantity:300,x:()=>ut(.05,.95),y:()=>dt(2),scale:()=>1.5*ut(.1,1)})})),Ee(a,{image:Ae(...t[3]),width:2048,height:200,quantity:2e3,x:()=>dt(3),y:()=>dt(2),scale:()=>1.5*ut(.1,1)})}),{opacity:.1}),a.wrapper((()=>{const e=ke(new p(0)),n=e.width;let o=0;const l=[];for(;o<=t;){const t=40*Math.random();l.push(t),o+=t*n*.3}let i=-1024;l.forEach((t=>{a.drawImage(e,{x:-2048,y:i,rotate:t,scaleX:t,scaleY:t}),a.drawImage(e,{x:2048,y:i,rotate:t,scaleX:t,scaleY:t}),i+=t*n*.3}))}),{opacity:1}),function(){const n=[],o=ht(16744576,8421631);for(let t=0;t<20;t+=1){const e=`rgb(${o(t/19).map((t=>255*t)).join(",")})`;n.push(e)}function l(o,l){for(let i=0;i<o;i+=1)a.circle({radius:l/2},{fill:n[i%20],x:(Math.random()-.5)*e,y:(Math.random()-.5)*t})}l(1e4,1),l(1e3,2),l(1e3,3)}(),a.canvas}().then((t=>{Ce.image=t}))),Ce}const Me=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,3,5,5,7,4,4,1,1,0,1,0,0,0,0,0,1,0,0,17,27,41,52,56,34,23,15,11,4,9,5,1,0,0,0,0,0,0,1,45,63,57,45,78,66,52,41,34,37,23,20,0,1,0,0,0,0,1,43,62,66,64,67,115,112,114,56,58,47,33,18,12,10,0,0,0,0,39,50,63,76,87,107,105,112,128,104,69,64,29,18,21,15,0,0,0,7,42,52,85,91,103,126,153,128,124,82,57,52,52,24,1,0,0,0,2,17,41,67,84,100,122,136,159,127,78,69,60,50,47,25,7,1,0,0,0,34,33,66,82,113,138,149,168,175,82,142,133,70,62,41,25,6,0,0,0,18,39,55,113,111,137,141,139,141,128,102,130,90,96,65,37,0,0,0,2,15,27,71,104,129,129,158,140,154,146,150,131,92,100,67,26,3,0,0,0,0,46,73,104,124,145,135,122,107,120,122,101,98,96,35,38,7,2,0,0,0,50,58,91,124,127,139,118,121,177,156,88,90,88,28,43,3,0,0,0,0,30,62,68,91,83,117,89,139,139,99,105,77,32,1,1,0,0,0,0,0,16,21,8,45,101,125,118,87,110,86,64,39,0,0,0,0,0,0,0,0,0,1,28,79,79,117,122,88,84,54,46,11,0,0,0,0,0,0,0,0,0,1,0,6,55,61,68,71,30,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,23,25,20,12,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,12,9,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2,2,0,0,0,0,0,0,0,0];function ke(t){const[e,a,n]=t.map((t=>255*t)),o=new Uint8ClampedArray(1600);for(let l=0;l<400;l+=1){const t=4*l;o[t]=e,o[t+1]=a,o[t+2]=n,o[t+3]=Me[l]}return et(new ImageData(o,20,20))}function Ae(t,e,a){const n=document.createElement("canvas"),o=n.getContext("2d");n.width=50,n.height=50,o.fillStyle=`rgb(${t.map((t=>255*t)).join(",")}, 0.3)`;const l=2*Math.PI;for(let r=0;r<300;r+=1){const t=Math.random();var i=Math.cos(l*e/300*r)*t*25,s=Math.sin(l*a/300*r)*t*25;o.beginPath(),o.arc(i+25,s+25,3,0,l),o.fill()}return n}function Ee(t,e){const a=Math.PI,{image:n,width:o,height:l,quantity:i,x:s,y:r,scale:c,fy:u=(t=>Math.sin(t*a))}=e;for(let d=0;d<i;d+=1){const e=s(),i=r(),p=c();t.drawImage(n,{x:(e-.5)*o,y:(i-.5)*u(e,d)*l,rotate:Math.random()*a,scaleX:p,scaleY:p})}}let Te;function Se(t){if(!Te){Te=new b(t);const e=new Image;e.onload=()=>Te.image=e,e.src="data:image/png;base64,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"}return Te}const Be=M.prototype.draw;class Ie extends M{draw(t={}){var e,a;const n=this.gl.renderer.state.viewport,o=null!=(e=null==n?void 0:n.width)?e:1e3,l=null!=(a=null==n?void 0:n.height)?a:1e3;this.program.uniforms.viewport={value:[o,l]},Be.call(this,t)}}function qe(t,e){const{colors:a,opacities:n,positions:o,randoms:l,sizes:i,texture:s}=e,r=new k(t,{color:{size:3,data:a},opacity:{size:1,data:n},position:{size:3,data:o},random:{size:1,data:l},size:{size:1,data:i}}),c=new x(t,{vertex:"attribute vec3 position;attribute vec3 color;attribute float opacity;attribute float random;attribute float size;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform vec2 viewport;varying vec4 vColor;varying float vRandom;void main(){vColor=vec4(color,opacity);vRandom=random;float scale=viewport.y*projectionMatrix[1][1]/900.0;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);gl_PointSize=size*scale/length(gl_Position);}",fragment:"precision mediump float;uniform sampler2D uTexture;varying vec4 vColor;varying float vRandom;void main(){vec2 coord=gl_PointCoord-0.5;float random=vRandom*3.14;float cosr=cos(random);float sinr=sin(random);mat2 rmat=mat2(cosr,-sinr,sinr,cosr);gl_FragColor=vColor*texture2D(uTexture,coord*rmat+0.5);}",uniforms:{uTexture:{value:s}},transparent:!0,depthTest:!1});return new Ie(t,{mode:t.POINTS,geometry:r,program:c})}async function Fe(t){return await Promise.all(Vt.data.map((e=>async function(t,e){const{points:a,rotationY:n,rotationX:o}=e,l=Math.floor(a.length/3),i=Se(t),s=()=>function(t,e,a){const n=new p(t).map((t=>t*a)),o=new p(e).map((t=>t*(1-a)));return n.map(((t,e)=>t+o[e]))}(16777215,7595007,Math.random()),r=new Float32Array(3*l),c=new Float32Array(l),u=new Float32Array(l),d=new Float32Array(l);for(let p=0;p<l;p+=1)r.set(s(),3*p),c.set([1],p),u.set([0],p),d.set([60],p);const h=qe(t,{positions:a,colors:r,opacities:c,randoms:u,sizes:d,texture:i});return h.rotation.x+=o,h.rotation.y+=n,h}(t,e))))}function Pe(t){const e=new g;return async function(t,e){(await async function(t){const e=new C(t,{radius:20,widthSegments:32}),a=xe(t),n=new x(t,{vertex:"precision highp float;precision highp int;attribute vec2 uv;attribute vec3 position;attribute vec3 normal;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragment:"precision highp float;precision highp int;uniform sampler2D tMap;varying vec2 vUv;void main(){vec3 tex=texture2D(tMap,vUv).rgb;gl_FragColor.rgb=tex;gl_FragColor.a=1.0;}",uniforms:{tMap:{value:a}},cullFace:!1}),o=new M(t,{geometry:e,program:n});return o.rotation.x=-.2,o.rotation.z=-.2,[o]}(t)).map((t=>t.setParent(e))),(await Fe(t)).map((t=>t.setParent(e)))}(t,e),e}async function je(t){return(await Promise.all(Vt.data.map((e=>async function(t,e){const{points:a,lines:n,rotationY:o,rotationX:l}=e,i=Math.floor(a.length/3),s=Se(t),r=new Float32Array(3*i),c=new Float32Array(i),u=new Float32Array(i),d=new Float32Array(i);for(let v=0;v<i;v+=1)r.set(De,3*v),c.set([1],v),u.set([0],v),d.set([80],v);const p=qe(t,{positions:a,colors:r,opacities:c,randoms:u,sizes:d,texture:s}),h=function(t,e){const{positions:a,color:n,opacity:o}=e,l=new k(t,{position:{size:3,data:a}}),i=new x(t,{vertex:"attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragment:"precision mediump float;uniform vec4 uColor;void main(){gl_FragColor=uColor;}",uniforms:{uColor:{value:[...n,o]}},transparent:!0,depthTest:!1});return new M(t,{mode:t.LINES,geometry:l,program:i})}(t,{positions:n,color:De,opacity:1});return[p,h].map((t=>(t.rotation.x+=l,t.rotation.y+=o,t)))}(t,e))))).reduce(((t,e)=>t.concat(e)),[])}const De=new p(7783679);function Le(t){const e=new g;return async function(t,e){(await je(t)).map((t=>t.setParent(e)))}(t,e),e}function Ye(t){const e=new A(t);return e.addPass({fragment:"precision highp float;uniform sampler2D tMap;uniform vec3 uBalance;varying vec2 vUv;void main(){vec3 tex=texture2D(tMap,vUv).rgb;gl_FragColor.rgb=tex*uBalance;gl_FragColor.a=1.0;}",uniforms:{uBalance:{value:new h(1,1,1)}}}),e.addPass({fragment:"precision highp float;uniform sampler2D tMap;varying vec2 vUv;void main(){vec3 tex=texture2D(tMap,vUv).rgb;float r=tex.r;float g=tex.g;float b=tex.b;float cMin=min(min(r,g),b);float cMax=max(max(r,g),b);float cAverage=(r+g+b)/3.0;tex=vec3((cMin+cMax+cAverage)/3.0);gl_FragColor.rgb=tex;gl_FragColor.a=1.0;}"}),e}var Re="_starry_4sdmm_1",ze=o({name:"TheStarrySky",setup(){const t=l(),a=v((()=>{if(t.value)return new E({canvas:t.value,preserveDrawingBuffer:!0,antialias:!0})})),n=v((()=>{if(!a.value)return;const t=a.value.gl;return t.clearColor(0,0,0,1),t})),o=v((()=>{if(n.value)return Pe(n.value)})),r=v((()=>{if(n.value&&o.value)return Le(n.value)})),c=v((()=>{if(n.value)return new T(n.value)})),u=v((()=>{if(!n.value)return;const t=new T(n.value);return t.scale.y=-1,t})),d=v((()=>{if(n.value)return Ye(n.value)})),p=v((()=>{if(n.value)return Ye(n.value)}));return m((()=>({renderer:a.value,w:kt.full.w,h:kt.full.h})),(({renderer:t,w:e,h:a})=>{null==t||t.setSize(e,a)})),m((()=>{const{full:t,camera:e}=kt,{w:a,h:o,offsetX:l,offsetY:i}=e;return{gl:n.value,x:(t.w-a)/2+l,y:(t.h-o)/2-i,w:a,h:o}}),(({gl:t,x:e,y:a,w:n,h:o})=>{null==t||t.scissor(e,a,n,o)})),m((()=>{const{w:t,h:e,fov:a}=kt.full;return{camera:c.value,aspect:t/e,fov:180*a/Math.PI}}),(({camera:t,aspect:e,fov:a})=>{null==t||t.perspective({fov:a,aspect:e})})),m((()=>{const{w:t,h:e,fov:a}=kt.photo;return{camera:u.value,aspect:t/e,fov:180*a/Math.PI}}),(({camera:t,aspect:e,fov:a})=>{null==t||t.perspective({fov:a,aspect:e})})),m((()=>({post:d.value,w:kt.full.w,h:kt.full.h})),(({post:t,w:e,h:a})=>{null==t||t.resize({width:e,height:a})})),m((()=>({post:p.value,w:kt.photo.w,h:kt.photo.h})),(({post:t,w:e,h:a})=>{null==t||t.resize({width:e,height:a})})),m((()=>({post:d.value,postView:p.value,balance:yt.balance,desaturate:yt.desaturate})),(({post:t,postView:e,balance:a,desaturate:n})=>{const o=t=>{if(!t)return;const[e,o]=t.passes;e.uniforms.uBalance.value=a,o.enabled=n};o(t),o(e)})),function(t){const e=l(),a=()=>{e.value=requestAnimationFrame(a),t()};i((()=>a())),s((()=>e.value&&cancelAnimationFrame(e.value)))}((()=>{const t=n.value,e=a.value,l=o.value,i=r.value,s=c.value,u=d.value;t&&e&&s&&u&&(s.rotation.copy(Dt.camera.rotation),it.isMobileInCSS||(t.disable(t.SCISSOR_TEST),yt.frontCamera&&(s.rotation.y+=Math.PI,s.rotation.x*=-1),e.render({camera:c.value,scene:o.value}),yt.frontCamera&&(s.rotation.y-=Math.PI,s.rotation.x*=-1)),t.enable(t.SCISSOR_TEST),u.render({camera:s,scene:l}),yt.visible.constellation&&e.render({camera:s,scene:i,clear:!1}))})),m((()=>yt.state),(t=>{t===gt.TAKING&&new Promise((async(t,e)=>{const l=n.value,i=a.value,s=o.value,d=r.value,h=c.value,v=u.value,m=p.value;if(!(l&&i&&h&&v&&m))return e();v.rotation.copy(h.rotation);const{w:f,h:g,offsetX:w,offsetY:_,outputW:y,outputH:b}=kt.photo,C=new S(l,{width:f,height:g});l.disable(l.SCISSOR_TEST),m.render({camera:v,scene:s,target:C}),yt.visible.constellation&&i.render({camera:v,scene:d,target:C,clear:!1});const x=new Uint8Array(y*b*4);l.bindFramebuffer(l.FRAMEBUFFER,C.buffer),l.readPixels(Math.max(0,w),Math.max(0,_),y,b,l.RGBA,l.UNSIGNED_BYTE,x),l.bindFramebuffer(l.FRAMEBUFFER,null);const M=et(new ImageData(new Uint8ClampedArray(x),y,b)),k=await at(M);t({src:URL.createObjectURL(k),w:M.width,h:M.height})})).then((t=>Qt.pushPhoto(t))).finally((()=>{yt.setState(gt.NO_STATUS)}))})),()=>e("canvas",{class:Re,ref:t},null)}});var Oe="_focus_7lopp_1",Xe="_info_7lopp_43";const{near:Ue,far:Ve}=U.constellation;var Ke=o({name:"TheFoucs",props:{onClick:{type:Function}},setup(t){const a=v((()=>{const t=200*U.constellation.scale,{x:e}=Dt.toPx(t,0,Ue);return e})),n=v((()=>{const t=Vt.focus;if(!t)return;const e=Dt.camera.rotation,{x:n,y:o,z:l}=new h(0,0,-Ve).applyMatrix4((new B).rotate(t.rotationX-e.x,[1,0,0]).rotate(t.rotationY-e.y,[0,1,0])),{x:i,y:s}=Dt.toPx(n,o,Math.abs(l)),r=a.value;return{width:`${r}px`,height:`${r}px`,transform:`translate(${-r/2+i}px, ${-r/2+s}px)`}}));let o=!1;const l=()=>{o=!0},i=()=>{o=!1,addEventListener("mousemove",l,{once:!0})},s=()=>{removeEventListener("mousemove",l)};return()=>{const a=Vt.focus;return a?e("div",w({class:Oe,title:a.title,style:n.value},mt,{onClick:e=>{var a;mt.onClick(e),o||null==(a=t.onClick)||a.call(t)},onMousedown:i,onMouseup:s}),[e("span",null,null),e("span",null,null),e("span",null,null),e("span",null,null)]):null}}}),Qe=o({name:"TheFoucsInfo",props:{onClick:{type:Function}},setup:t=>()=>{const a=Vt.focus;return a?e("div",{class:Xe},[e("div",w({title:a.title},mt,{onClick:e=>{var a;mt.onClick(e),null==(a=t.onClick)||a.call(t)}}),[a.title])]):null}});var Ne="_overlay_gq57q_1",Je="_mask_gq57q_2",He="_container_gq57q_3",We="_table_gq57q_24",Ge="_table-cell_gq57q_30",Ze="_enter--active_gq57q_35",$e="_enter--from_gq57q_39",ta="_enter--to_gq57q_43";let ea=0;const aa=u([]);!function(){const t=document.body;let e,a=0;m((()=>aa.length),(n=>{!n!=!a&&(n?(e=t.style.overflow,t.style.overflow="hidden"):t.style.overflow=e,a=n)}))}();var na=o({name:"Overlay",props:{visible:{type:Boolean,default:!1},maskColor:{type:String,default:"rgba(0, 0, 0, 0.35)"},onMaskClick:{type:Function}},setup(t,{slots:a}){const n={container:l(),cell:l()},o=ea++,i=()=>{const t=aa.indexOf(o);~t&&aa.splice(t,1)};s(i),m((()=>t.visible),(t=>t?aa.push(o):i()),{immediate:!0});let r=!1;const c=t=>{t.target===n.cell.value&&(r=!0)},u=t=>{r&&t.target!==n.cell.value&&(r=!1)},d=e=>{var a;r&&(r=!1,e.target===n.cell.value&&(null==(a=t.onMaskClick)||a.call(t,e)))};let p=0;const h=t=>{const e=t.touches[0];e&&(p=e.pageY)},v=t=>{if(!t.cancelable)return;const e=t.touches[0],a=n.container.value;if(!e||!a)return;const{clientHeight:o,scrollTop:l,scrollHeight:i}=a;p<e.pageY?l<=0&&t.preventDefault():p>e.pageY&&l>=i-o&&t.preventDefault()};return()=>e(I,{to:"#overlay"},{default:()=>[e(_,{enterActiveClass:Ze,enterFromClass:$e,enterToClass:ta,leaveActiveClass:Ze,leaveFromClass:ta,leaveToClass:$e},{default:()=>{var l;if(!t.visible)return null;const i=aa[aa.length-1]===o;return e("div",{class:Ne},[i?e("div",{class:Je,style:{backgroundColor:t.maskColor}},null):null,e("div",{ref:n.container,class:He,style:{overflow:i?void 0:"hidden"}},[e("div",{class:We},[e("div",{ref:n.cell,class:Ge,onMousedown:c,onMousemove:u,onMouseup:d,onTouchstart:h,onTouchmove:v},[null==(l=a.default)?void 0:l.call(a)])])])])}})]})}});var oa="_popup_qtxwv_6",la="_header_qtxwv_27",ia="_close_qtxwv_44",sa="_scale--active_qtxwv_93",ra="_scale--from_qtxwv_98",ca="_scale--to_qtxwv_102",ua="_slide--active_qtxwv_106",da="_slide--from_qtxwv_110",pa="_slide--to_qtxwv_114",ha=o({name:"Popup",props:{visible:{type:Boolean,default:!1},maskColor:{type:String},onMaskClick:{type:Function},onCloseClick:{type:Function},title:{type:String},startTarget:{type:Object},popupClass:{type:String},transition:{type:String,default:"slide"},fullscreen:{type:String,default:"none"}},setup(t,{slots:a}){const n=function(t){const e=u({overlay:t(),content:t()});return m(t,(t=>{t?(e.overlay=t,y((()=>e.content=t))):(e.content=t,y((()=>e.overlay=t)))})),e}((()=>t.visible)),o=l(),i=()=>{const e=t.startTarget,a=o.value;if(a)if(e){const t=e.getBoundingClientRect(),n=a.getBoundingClientRect();va(a,`${t.left-n.left}px ${t.top-n.top}px`)}else va(a,null)};m((()=>t.visible),(t=>{t?y((()=>y(i))):i()}));const s=v((()=>{switch(t.transition){case"scale":return{enterActiveClass:sa,enterFromClass:ra,enterToClass:ca,leaveActiveClass:sa,leaveFromClass:ca,leaveToClass:ra};default:return{enterActiveClass:ua,enterFromClass:da,enterToClass:pa,leaveActiveClass:ua,leaveFromClass:pa,leaveToClass:da}}}));return()=>e(na,{visible:n.overlay,maskColor:t.maskColor,onMaskClick:t.onMaskClick},{default:()=>e(_,s.value,{default:()=>{var l;return n.content?e("div",{class:[oa,t.popupClass],ref:o,"data-fullscreen":t.fullscreen},[e("div",{class:la},[t.title,e("div",{title:"关闭",class:ia,onClick:t.onCloseClick},[e(Ht,{value:"close"},null)])]),null==(l=a.default)?void 0:l.call(a)]):null}})})}});function va(t,e){const a=t.style;["WebkitTransformOrigin","MozTransformOrigin","Ms","msTransformOrigin","transformOrigin"].forEach((t=>a[t]=e))}var ma=o({name:"Swiper",props:{items:{type:Array,default:[]},options:{type:Object,default:{}},onClose:{type:Function}},setup(a){const n=l();return i((()=>function(){if(!n.value)return;const e=new q(n.value,F,a.items,t({history:!1,shareEl:!1,fullscreenEl:!1,showHideOpacity:!0},a.options));(function(t){t.listen("imageLoadComplete",((e,a)=>{const n=new Image;n.src=a.src,n.onload=()=>{a.w=n.width,a.h=n.height,t.updateSize(!0)}})),t.listen("destroy",(()=>{var t;return null==(t=a.onClose)?void 0:t.call(a)}))})(e),e.init()}())),()=>e(I,{to:"#overlay"},{default:()=>[e("div",{class:"pswp",tabindex:-1,role:"dialog","aria-hidden":"true",ref:n},[e("div",{class:"pswp__bg"},null),e("div",{class:"pswp__scroll-wrap"},[e("div",{class:"pswp__container"},[e("div",{class:"pswp__item"},null),e("div",{class:"pswp__item"},null),e("div",{class:"pswp__item"},null)]),e("div",{class:"pswp__ui pswp__ui--hidden"},[e("div",{class:"pswp__top-bar"},[e("div",{class:"pswp__counter"},null),e("button",{class:"pswp__button pswp__button--close",title:"Close (Esc)"},null),e("button",{class:"pswp__button pswp__button--share",title:"Share"},null),e("button",{class:"pswp__button pswp__button--fs",title:"Toggle fullscreen"},null),e("button",{class:"pswp__button pswp__button--zoom",title:"Zoom in/out"},null),e("div",{class:"pswp__preloader"},[e("div",{class:"pswp__preloader__icn"},[e("div",{class:"pswp__preloader__cut"},[e("div",{class:"pswp__preloader__donut"},null)])])])]),e("div",{class:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},[e("div",{class:"pswp__share-tooltip"},null)]),e("button",{class:"pswp__button pswp__button--arrow--left",title:"Previous (arrow left)"},null),e("button",{class:"pswp__button pswp__button--arrow--right",title:"Next (arrow right)"},null),e("div",{class:"pswp__caption"},[e("div",{class:"pswp__caption__center"},null)])])])])]})}});var fa="_popup_vqe1c_8",ga="_album_vqe1c_12",wa="_item_vqe1c_18",_a="_none_vqe1c_32",ya=o({name:"TheAlbum",props:{},setup(){const o=l(),i=u({visible:!1,index:0}),s=v((()=>Qt.photos.map((e=>t({},e))))),r=t=>{if(!o.value)return;const e=o.value.children,a=s.value[t],n=window.pageYOffset||document.documentElement.scrollTop,l=e[t];if(!l)return;const i=l.getBoundingClientRect();let r=i.left,c=i.top+n,{w:u,h:d}=a;return u>d?(u=u*i.height/d,d=i.height,r-=(u-d)/2):(d=d*i.width/u,u=i.width,c-=(d-u)/2),{x:r,y:c,w:u}};return()=>e(ha,{title:"相册",visible:yt.visible.album,startTarget:Qt.buttonElement,popupClass:fa,transition:"scale",fullscreen:"mobile",onMaskClick:()=>yt.setVisible("album",!1),onCloseClick:()=>yt.setVisible("album",!1)},{default:()=>e(n,null,[e("div",{class:ga,ref:o},[Qt.photos.map((({msrc:t},a)=>e("div",{class:wa,key:t},[e("div",{onClick:()=>{i.visible=!0,i.index=a},style:{backgroundImage:`url(${t})`}},null)]))),0===Qt.photos.length?e("div",{class:_a},[a("这里空空如也")]):null]),i.visible?e(ma,{items:s.value,options:{getThumbBoundsFn:r,index:i.index},onClose:()=>i.visible=!1},null):null])})}});var ba="_slider_195i1_1",Ca="_rail_195i1_10",xa="_track_195i1_13",Ma="_handle_195i1_16",ka=o({name:"Slider",props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},onChange:{type:Function}},setup(t){const a={slider:l(),handle:l()},n=u({value:0,percentage:0}),o=e=>{const a=t.min,n=t.max,o=t.step;let l=Math.max(Math.min(e,n),a);return l=Math.round(l/o)*o,l};m((()=>({value:t.value,min:t.min,max:t.max})),(({value:t})=>{n.value=o(t)}),{immediate:!0}),m((()=>n.value),(e=>{n.percentage=(e-t.min)/(t.max-t.min)}),{immediate:!0});const i=(e,a)=>{const n=a.getBoundingClientRect(),l=window.pageXOffset+n.left,i=(e-l)/(l+n.width-l);return o(t.min+i*(t.max-t.min))};function s(e){var n;if(!a.slider.value)return;const o=i(e,a.slider.value);null==(n=t.onChange)||n.call(t,o)}function r(e){var n;if(!a.slider.value)return;const o=i(e,a.slider.value);null==(n=t.onChange)||n.call(t,o)}function c(t){if(0!==t.button)return;s(Aa(t)),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p)}function d(t){r(Aa(t))}function p(t){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p)}function h(t){s(Ea(t)),document.addEventListener("touchmove",v),document.addEventListener("touchend",f)}function v(t){r(Ea(t))}function f(t){document.removeEventListener("touchmove",v),document.removeEventListener("touchend",f)}return()=>e("div",{ref:a.slider,class:ba,onMousedown:c,onTouchstart:h,onDragstart:t=>t.preventDefault()},[e("div",{class:Ca},null),e("div",{class:xa,style:{width:100*n.percentage+"%"}},null),e("div",{ref:a.handle,class:Ma,style:{left:100*n.percentage+"%"}},null)])}});function Aa(t){let e=1;return window.visualViewport&&(e=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),t.pageX/e}function Ea(t){let e=1;return window.visualViewport&&(e=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),t.touches[0].pageX/e}var Ta="_switch_m9sms_1",Sa=o({name:"Switch",props:{value:{type:Boolean,default:!1},onChange:{type:Function}},setup(t){const a=()=>{var e;null==(e=t.onChange)||e.call(t,!t.value)};return()=>e("div",{class:Ta,"data-active":t.value,onClick:a},null)}});var Ba="_balance_1qpfq_6",Ia="_row_1qpfq_6",qa="_label_1qpfq_12",Fa="_content_1qpfq_17";var Pa=o({name:"TheBalance",setup:()=>()=>e(ha,{title:"色彩平衡",popupClass:Ba,visible:yt.visible.balance,maskColor:"transparent",onMaskClick:()=>yt.setVisible("balance",!1),onCloseClick:()=>yt.setVisible("balance",!1)},{default:()=>e(n,null,[["R","G","B"].map(((t,a)=>e("div",{class:Ia},[e("div",{class:qa},[t]),e("div",{class:Fa},[e(ka,{value:yt.balance[a],onChange:t=>((t,e)=>{const a=yt.balance.clone();a[e]=t,yt.setBalance(a)})(t,a),min:0,max:2,step:.05},null)])]))),e("div",{class:Ia},[e("div",{class:qa},[a("去色")]),e("div",{class:Fa},[e(Sa,{value:yt.desaturate,onChange:yt.setDesaturate,style:{display:"block",marginLeft:"0.24rem"}},null)])])])})}),ja=o({name:"Constellation",props:{points:{type:Array,required:!0},lines:{type:Array,required:!0}},setup(t){const a=v((()=>{const e=[],{points:a}=t;for(let t=0;t<a.length;t+=2){const n=Da([a[t],a[t+1]]);e.push(n)}return e})),n=v((()=>{const e=[],{lines:a}=t;for(let t=0;t<a.length;t+=2)e.push([a[t],a[t+1]]);return e}));return()=>e("svg",w({viewBox:"-100 -100 200 200",version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"}),[a.value.map((([t,a])=>e("circle",{cx:t,cy:a,r:"4",fill:"currentColor"},null))),n.value.map((([t,n])=>{var o,l;const i=a.value,[s,r]=null!=(o=i[t])?o:[],[c,u]=null!=(l=i[n])?l:[];return e("line",{x1:s,y1:r,x2:c,y2:u,stroke:"currentColor",fill:"transparent","stroke-width":"2"},null)}))])}});function Da([t,e]){return[t,-e]}var La="_constellation_1cwer_7",Ya="_card_1cwer_11",Ra="_logo_1cwer_20",za="_content_1cwer_27",Oa="_title_1cwer_31",Xa="_description_1cwer_36",Ua="_link_1cwer_42",Va=o({name:"ConstellationInfoCard",props:{data:{type:Object,required:!0}},setup(t){const n=l(t.data.points),o=v((()=>"关于我"===t.data.title)),i=()=>{const t=P(n.value),e=R.filter((e=>e!==t));if(!e.length)return;const a=Math.floor(Math.random()*e.length);n.value=e[a]};return()=>e("div",{class:Ya},[t.data.url?e("a",{href:t.data.url,class:Ra,target:"blank"},[e(ja,{points:t.data.points,lines:t.data.lines},null)]):e("div",{class:Ra,style:o.value?{cursor:"pointer"}:void 0,onClick:o.value?i:void 0},[e(ja,{points:n.value,lines:t.data.lines},null)]),e("div",{class:za},[e("div",{class:Oa},[t.data.title]),e("div",{class:Xa},[t.data.description]),t.data.url?e("div",{class:Ua},[e("a",{href:t.data.url,target:"blank"},[a("Link Start")])]):null])])}});var Ka="_list_1owqo_7",Qa=o({name:"TheList",setup:()=>()=>e(ha,{title:"星座图鉴列表",popupClass:Ka,visible:yt.visible.list,onMaskClick:()=>yt.setVisible("list",!1),onCloseClick:()=>yt.setVisible("list",!1)},{default:()=>Y.map((t=>e(Va,{data:t},null)))})});var Na="_notification_13hu3_1",Ja="_message_13hu3_11",Ha="_enter--active_13hu3_21",Wa="_enter--from_13hu3_25",Ga="_enter--to_13hu3_29",Za=o({name:"TheNotification",setup(){const t=u({text:"",active:!1});let a;return m((()=>t.text),(e=>{clearTimeout(a),""!==e&&(a=setTimeout((()=>t.text=""),1e3))})),s((()=>clearTimeout(a))),m((()=>yt.delay),(e=>{e?(t.text=`延时 ${Math.floor(e/1e3)} 秒`,t.active=!0):(t.text="延时已关闭",t.active=!1)})),m((()=>yt.visible.constellation),(e=>{e?(t.text="显示星座",t.active=!0):(t.text="隐藏星座",t.active=!1)})),m((()=>yt.frontCamera),(e=>{t.active=!1,t.text=(e?"前置":"后置")+"摄像头"})),()=>e(_,{enterActiveClass:Ha,enterFromClass:Wa,enterToClass:Ga,leaveActiveClass:Ha,leaveFromClass:Ga,leaveToClass:Wa},{default:()=>t.text&&e("div",{class:Na},[e("span",{class:Ja,"data-active":t.active},[t.text])])})}}),$a=o({name:"ConstellationInfo",props:{visible:{type:Boolean,default:!1},index:{type:Number},onMaskClick:{type:Function},onCloseClick:{type:Function}},setup(t){const a=v((()=>{var e,a;return null!=(a=Y[null!=(e=t.index)?e:0])?a:Y[0]}));return()=>e(ha,{title:"星座图鉴",popupClass:La,visible:t.visible,onMaskClick:t.onMaskClick,onCloseClick:t.onCloseClick},{default:()=>a.value?e(Va,{data:a.value},null):null})}});j(o((()=>{i((()=>$removeLoading()));const t=u({index:-1}),a=()=>{const e=Vt.data.indexOf(Vt.focus);t.index=e};return()=>e(n,null,[e(ze,null,null),e($,null,{default:()=>e(n,null,[e(ye,null,{default:()=>e(n,null,[e(Za,null,null),e(Qe,{onClick:a},null)])}),e(Ke,{onClick:a},null)])}),e(ya,null,null),e(Pa,null,null),e(Qa,null,null),e($a,{visible:!!~t.index,index:t.index,onMaskClick:()=>t.index=-1,onCloseClick:()=>t.index=-1},null)])}))).mount(it.root);
